<h1>Ongoing Itineraries</h1>
<% @ongoing_itineraries.group_by(&:city).each do |city, itineraries| %>
  <h2><%= city.name %></h2>
  <div class="card-trip">
  <img src="<%= city.image_url_one %>" class="d-block w-100" alt="...">
  </div>
  <% itineraries.each do |itinerary| %>
    <div>
      <%= link_to itinerary.title, itinerary_path(itinerary) %>
      <%= link_to icon('fa-regular', 'trash-can icon-hover-trash'), itinerary_path(itinerary), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this itinerary?" } %>
      <%= link_to icon('fa-regular', 'edit icon-hover-edit'), edit_itinerary_path(itinerary) %>
      <p>Start Date: <%= itinerary.start_date %></p>
      <p>End Date: <%= itinerary.end_date %></p>
    </div>
  <% end %>
<% end %>

<h1>Past Itineraries</h1>
<% @past_itineraries.group_by(&:city).each do |city, itineraries| %>
  <h2><%= city.name %></h2>
  <div class="card-trip">
    <img src="<%= city.image_url_one %>" class="d-block w-100" alt="...">
  </div>
  <% itineraries.each do |itinerary| %>
    <div>
      <%= link_to itinerary.title, itinerary_path(itinerary) %>
      <%= link_to icon('fa-regular', 'trash-can icon-hover-trash'), itinerary_path(itinerary), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this itinerary?" } %>
      <% unless itinerary.review.present? %>
        <%= link_to icon('fa-regular', 'edit icon-hover-edit'), edit_itinerary_path(itinerary), class: 'edit-icon text-warning' %>
        <span class="text-warning">Don't forget to leave a review!</span>
      <% else %>
        <%= link_to icon('fa-regular', 'edit icon-hover-edit'), edit_itinerary_path(itinerary), class: 'edit-icon' %>
      <% end %>
      <p>Start Date: <%= itinerary.start_date %></p>
      <p>End Date: <%= itinerary.end_date %></p>
    </div>
  <% end %>
<% end %>
